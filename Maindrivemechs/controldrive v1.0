import edu.wpi.first.wpilibj2.command.CommandBase;

public class SwerveDriveCommand extends CommandBase {
    private final SwerveDriveSubsystem swerveDriveSubsystem;
    private final DoubleSupplier forwardBackward;
    private final DoubleSupplier strafe;
    private final DoubleSupplier rotation;

    public SwerveDriveCommand(
            SwerveDriveSubsystem swerveDriveSubsystem,
            DoubleSupplier forwardBackward,
            DoubleSupplier strafe,
            DoubleSupplier rotation) {
        this.swerveDriveSubsystem = swerveDriveSubsystem;
        this.forwardBackward = forwardBackward;
        this.strafe = strafe;
        this.rotation = rotation;

        // Declare subsystem dependencies
        addRequirements(swerveDriveSubsystem);
    }

    @Override
    public void initialize() {
        // Initialize anything required before starting the command
    }

    @Override
    public void execute() {
        // Get the joystick inputs from the Xbox controller
        double xSpeed = forwardBackward.getAsDouble();   // Y-axis on left joystick
        double ySpeed = strafe.getAsDouble();             // X-axis on left joystick
        double rot = rotation.getAsDouble();             // X-axis on right joystick

        // Update the swerve drive with the calculated speeds and rotation
        swerveDriveSubsystem.drive(xSpeed, ySpeed, rot);
    }

    @Override
    public void end(boolean interrupted) {
        // Stop the drive when the command ends
        swerveDriveSubsystem.drive(0, 0, 0);
    }

    @Override
    public boolean isFinished() {
        return false;  // This command never finishes, it runs until the robot is disabled or another command is scheduled
    }
}
